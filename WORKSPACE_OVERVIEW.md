# å·¥ä½œåŒºé¡¹ç›®æ¦‚è§ˆ - ç„•æ–°ä¹‹æ—…æˆ’çƒŸåº”ç”¨

> **AIè®°å¿†æç¤º**: æ­¤å·¥ä½œåŒºåŒ…å«ä¸¤ä¸ªç‹¬ç«‹ä½†ç›¸å…³çš„é¡¹ç›®ï¼šFlutterç§»åŠ¨ç«¯åº”ç”¨ + Spring Bootåç«¯æœåŠ¡

## ğŸ“‹ å·¥ä½œåŒºæ¦‚è¿°

**é¡¹ç›®åç§°**: ç„•æ–°ä¹‹æ—… (Quit Journey) - æˆ’çƒŸè¾…åŠ©åº”ç”¨  
**å·¥ä½œåŒºè·¯å¾„**: `/Users/wangjianguo/IdeaProjects/quit-journey-backend`
**é¡¹ç›®ç±»å‹**: å…¨æ ˆç§»åŠ¨åº”ç”¨ (å‰åç«¯åˆ†ç¦»æ¶æ„)  
**å¼€å‘çŠ¶æ€**: MVPåŠŸèƒ½åŸºæœ¬å®Œæˆï¼Œåç«¯é›†æˆè¿›è¡Œä¸­

---

## ğŸ“± é¡¹ç›®1: Flutterå‰ç«¯åº”ç”¨

### åŸºæœ¬ä¿¡æ¯
- **é¡¹ç›®ç±»å‹**: Flutterç§»åŠ¨åº”ç”¨ (iOS/Android)
- **åŒ…å**: `quitting_smoking`
- **ç‰ˆæœ¬**: 1.0.0+1
- **ä¸»è¦æ–‡ä»¶**: `pubspec.yaml`, `lib/main.dart`

### æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Flutter 3.x + Dart 3.7.0+
- **çŠ¶æ€ç®¡ç†**: Riverpod 2.5.1
- **è·¯ç”±**: GoRouter 15.1.2
- **æœ¬åœ°å­˜å‚¨**: Hive + SharedPreferences
- **ç½‘ç»œè¯·æ±‚**: Dio 5.4.0 + Retrofit 4.0.3
- **UIç»„ä»¶**: Material Design + LottieåŠ¨ç”»
- **å›½é™…åŒ–**: ä¸­æ–‡/è‹±æ–‡åŒè¯­æ”¯æŒ

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
- âœ… **ç”¨æˆ·è®¤è¯**: ç™»å½•/æ³¨å†Œ/åˆå§‹è®¾ç½®
- âœ… **è¿›åº¦è¿½è¸ª**: æˆ’çƒŸæ—¶é•¿ã€èŠ‚çœé‡‘é¢ã€å°‘å¸çƒŸæ”¯æ•°
- âœ… **å¥åº·æ•ˆç›Š**: åˆ†é˜¶æ®µå¥åº·æ¢å¤é‡Œç¨‹ç¢‘å±•ç¤º
- âœ… **çƒŸç˜¾ç®¡ç†**: "æˆ‘æƒ³å¸çƒŸ"åº”æ€¥æŒ‰é’®ã€åº”å¯¹ç­–ç•¥ã€æ·±å‘¼å¸ç»ƒä¹ 
- âœ… **æ¯æ—¥æ‰“å¡**: æœ¬åœ°å­˜å‚¨ã€å³æ—¶åé¦ˆ
- âœ… **æˆå°±ç³»ç»Ÿ**: 12ç§é¢„è®¾æˆå°±ã€è‡ªåŠ¨è§£é”ã€å¾½ç« å¢™
- âœ… **æ•°æ®ç»Ÿè®¡**: æœˆåº¦æ—¥å†è§†å›¾ã€è¶‹åŠ¿å›¾è¡¨
- âœ… **ä¸»é¢˜ç³»ç»Ÿ**: æ˜äº®/æš—é»‘/è·Ÿéšç³»ç»Ÿ
- ğŸ”„ **äº‘ç«¯åŒæ­¥**: ä¸åç«¯APIé›†æˆä¸­

### é¡¹ç›®ç»“æ„
```
lib/
â”œâ”€â”€ main.dart                 # åº”ç”¨å…¥å£
â”œâ”€â”€ app_widget.dart          # åº”ç”¨æ ¹ç»„ä»¶
â”œâ”€â”€ core/                    # æ ¸å¿ƒå·¥å…·ã€é…ç½®ã€ä¸»é¢˜
â”œâ”€â”€ data/                    # æ•°æ®å±‚ (æœ¬åœ°/è¿œç¨‹æ•°æ®æº)
â”œâ”€â”€ domain/                  # é¢†åŸŸå±‚ (å®ä½“ã€ä»“åº“æ¥å£ã€ç”¨ä¾‹)
â””â”€â”€ presentation/            # è¡¨ç°å±‚ (é¡µé¢ã€ç»„ä»¶ã€çŠ¶æ€ç®¡ç†)
```

### å¿«é€Ÿå¯åŠ¨
```bash
# å®‰è£…ä¾èµ–
flutter pub get

# ä»£ç ç”Ÿæˆ
flutter packages pub run build_runner build

# è¿è¡Œåº”ç”¨ (è°ƒè¯•æ¨¡å¼)
flutter run

# è¿è¡Œåº”ç”¨ (å‘å¸ƒæ¨¡å¼)
flutter run --release
```

---

## ğŸš€ é¡¹ç›®2: Spring Bootåç«¯æœåŠ¡

### åŸºæœ¬ä¿¡æ¯
- **é¡¹ç›®ç±»å‹**: Spring Boot REST APIæœåŠ¡
- **è¯­è¨€**: Kotlin
- **ç‰ˆæœ¬**: Spring Boot 3.2.x
- **ä¸»è¦æ–‡ä»¶**: `build.gradle.kts`, `src/main/kotlin/`

### æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Spring Boot 3.2.x + Kotlin 1.9.x
- **å®‰å…¨**: Spring Security 6.x + JWTè®¤è¯
- **æ•°æ®åº“**: PostgreSQL 15+ (ä¸»åº“) + Redis 7+ (ç¼“å­˜)
- **ORM**: Spring Data JPA + Hibernate
- **æ„å»º**: Gradle Kotlin DSL
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **APIæ–‡æ¡£**: SpringDoc OpenAPI 3.0

### æ ¸å¿ƒAPIæ¨¡å—
- **è®¤è¯æœåŠ¡**: ç”¨æˆ·æ³¨å†Œ/ç™»å½•/ä»¤ç‰Œåˆ·æ–°
- **ç”¨æˆ·ç®¡ç†**: ç”¨æˆ·èµ„æ–™ã€ç»Ÿè®¡æ•°æ®
- **æ¯æ—¥æ‰“å¡**: æ‰“å¡è®°å½•CRUDã€ç»Ÿè®¡åˆ†æ
- **å¸çƒŸè®°å½•**: å¸çƒŸæ•°æ®è®°å½•å’Œç®¡ç†
- **æˆå°±ç³»ç»Ÿ**: æˆå°±è§£é”å’Œè¿›åº¦è¿½è¸ª
- **æ•°æ®åŒæ­¥**: å¤šè®¾å¤‡æ•°æ®åŒæ­¥å’Œå†²çªè§£å†³

### é¡¹ç›®ç»“æ„
```
src/main/kotlin/com/quitjourney/
â”œâ”€â”€ QuitJourneyApplication.kt    # åº”ç”¨å¯åŠ¨ç±»
â”œâ”€â”€ config/                      # é…ç½®ç±» (å®‰å…¨ã€ç¼“å­˜ã€APIæ–‡æ¡£)
â”œâ”€â”€ controller/                  # RESTæ§åˆ¶å™¨
â”œâ”€â”€ service/                     # ä¸šåŠ¡é€»è¾‘å±‚
â”œâ”€â”€ repository/                  # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ entity/                      # JPAå®ä½“ç±»
â”œâ”€â”€ dto/                         # æ•°æ®ä¼ è¾“å¯¹è±¡
â””â”€â”€ security/                    # å®‰å…¨ç›¸å…³ç±»
```

### æ•°æ®åº“è¡¨ç»“æ„
- `users` - ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- `user_profiles` - ç”¨æˆ·è¯¦ç»†èµ„æ–™
- `daily_checkins` - æ¯æ—¥æ‰“å¡è®°å½•
- `smoking_records` - å¸çƒŸè®°å½•
- `achievements` - æˆå°±å®šä¹‰
- `user_achievements` - ç”¨æˆ·æˆå°±è®°å½•

### å¿«é€Ÿå¯åŠ¨
```bash
# ä½¿ç”¨Docker Composeå¯åŠ¨æ‰€æœ‰æœåŠ¡ (æ¨è)
docker-compose up -d

# æœ¬åœ°å¼€å‘å¯åŠ¨ (éœ€è¦å…ˆå¯åŠ¨æ•°æ®åº“)
docker-compose up -d db redis
./gradlew bootRun --args='--spring.profiles.active=dev'

# æ„å»ºJARåŒ…
./gradlew build
```

### æœåŠ¡ç«¯ç‚¹
- **APIæ–‡æ¡£**: http://localhost:8080/api/v1/swagger-ui/index.html
- **å¥åº·æ£€æŸ¥**: http://localhost:8080/api/v1/actuator/health
- **APIæ ¹è·¯å¾„**: http://localhost:8080/api/v1/

---

## ğŸ”— é¡¹ç›®å…³ç³»

### æ¶æ„æ¦‚è¿°
```
Flutter App (ç§»åŠ¨ç«¯)
    â†• HTTP/HTTPS
Spring Boot API (åç«¯)
    â†• JDBC
PostgreSQL (æ•°æ®åº“) + Redis (ç¼“å­˜)
```

### æ•°æ®æµ
1. **ç”¨æˆ·æ“ä½œ** â†’ Flutter UI
2. **çŠ¶æ€ç®¡ç†** â†’ Riverpod Providers
3. **æœ¬åœ°å­˜å‚¨** â†’ Hiveæ•°æ®åº“ (ç¦»çº¿æ”¯æŒ)
4. **ç½‘ç»œè¯·æ±‚** â†’ Dio + Retrofit â†’ Spring Boot API
5. **æ•°æ®æŒä¹…åŒ–** â†’ PostgreSQLæ•°æ®åº“
6. **ç¼“å­˜ä¼˜åŒ–** â†’ Redisç¼“å­˜

### å¼€å‘æ¨¡å¼
- **å‰ç«¯**: æœ¬åœ°å¼€å‘ï¼Œä½¿ç”¨Hiveæœ¬åœ°å­˜å‚¨
- **åç«¯**: Dockerå®¹å™¨åŒ–å¼€å‘ç¯å¢ƒ
- **é›†æˆ**: å‰ç«¯é€šè¿‡APIä¸åç«¯é€šä¿¡ï¼Œæ”¯æŒç¦»çº¿æ¨¡å¼

---

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒè¦æ±‚

### Flutterå‰ç«¯
- Flutter SDK 3.x+
- Dart SDK 3.7.0+
- Android Studio / VS Code
- iOSå¼€å‘éœ€è¦Xcode (macOS)

### Spring Bootåç«¯
- JDK 17+
- Docker & Docker Compose
- IntelliJ IDEA (æ¨è)

### æ•°æ®åº“
- PostgreSQL 15+ (å¯ç”¨Docker)
- Redis 7+ (å¯ç”¨Docker)

---

## ğŸ“Š é¡¹ç›®çŠ¶æ€

### å·²å®ŒæˆåŠŸèƒ½
- âœ… Flutterå‰ç«¯MVPåŠŸèƒ½ (90%å®Œæˆ)
- âœ… Spring Bootåç«¯APIæ¡†æ¶
- âœ… æ•°æ®åº“è®¾è®¡å’Œè¿ç§»è„šæœ¬
- âœ… Dockerå®¹å™¨åŒ–éƒ¨ç½²

### è¿›è¡Œä¸­
- ğŸ”„ å‰åç«¯APIé›†æˆ
- ğŸ”„ æ•°æ®åŒæ­¥æœºåˆ¶
- ğŸ”„ ç”¨æˆ·è®¤è¯æµç¨‹

### å¾…å¼€å‘
- â³ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- â³ åº”ç”¨å•†åº—å‘å¸ƒ
- â³ é«˜çº§åŠŸèƒ½ (ç¤¾åŒºã€AIå»ºè®®ç­‰)

---

## ğŸš€ å¿«é€Ÿå‘½ä»¤é€ŸæŸ¥

### Flutterå¼€å‘
```bash
flutter pub get                 # å®‰è£…ä¾èµ–
flutter run                     # è¿è¡Œåº”ç”¨
flutter build apk              # æ„å»ºAndroid APK
flutter test                   # è¿è¡Œæµ‹è¯•
flutter analyze                # ä»£ç åˆ†æ
```

### Spring Bootå¼€å‘
```bash
docker-compose up -d            # å¯åŠ¨æ‰€æœ‰æœåŠ¡
./gradlew bootRun              # è¿è¡Œåç«¯æœåŠ¡
./gradlew test                 # è¿è¡Œæµ‹è¯•
./gradlew build                # æ„å»ºé¡¹ç›®
```

### æ•°æ®åº“ç®¡ç†
```bash
docker-compose logs db         # æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
./gradlew flywayMigrate       # æ‰§è¡Œæ•°æ®åº“è¿ç§»
./gradlew flywayInfo          # æŸ¥çœ‹è¿ç§»çŠ¶æ€
```

---

**æœ€åæ›´æ–°**: 2024å¹´12æœˆ
**ç»´æŠ¤è€…**: Quit Journeyå¼€å‘å›¢é˜Ÿ
